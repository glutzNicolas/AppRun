Index: app/src/main/java/ch/bfh/memory/activities/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ch.bfh.memory.activities;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.DialogInterface;\r\nimport android.os.Bundle;\r\nimport android.provider.ContactsContract;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\n\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.Context;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.zxing.client.android.Intents;\r\nimport com.journeyapps.barcodescanner.ScanContract;\r\nimport com.journeyapps.barcodescanner.ScanOptions;\r\n\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileOutputStream;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport ch.bfh.memory.R;\r\n\r\nimport ch.bfh.memory.interfaces.ClickListener;\r\nimport ch.bfh.memory.models.MemoryCard;\r\nimport ch.bfh.memory.models.MemoryPair;\r\nimport ch.bfh.memory.utils.DataUtil;\r\nimport ch.bfh.memory.utils.LogAppUtil;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private static RecyclerView recyclerView;\r\n    public static RecyclerView.Adapter memoryAdaptor;\r\n\r\n    /**\r\n     * Buttons\r\n     */\r\n    private Button btn_logBook;\r\n    private Button btn_removeAllConnections;\r\n    private Button btn_removeAll;\r\n    private Button btn_addCard;\r\n\r\n    private View.OnClickListener listener_addCard;\r\n    private View.OnClickListener listener_sendToLogBook;\r\n    private View.OnClickListener listener_removeAll;\r\n    private View.OnClickListener listener_removeAllConnections;\r\n    private ClickListener listener_addSecondCard;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        //init the listeners before adding them to the buttons and co...\r\n        initListeners();\r\n\r\n        //couple the components with the view and load data\r\n        init();\r\n    }\r\n\r\n    private void init() {\r\n        //load data from file\r\n        loadPairs();\r\n\r\n        //init recycleview\r\n        recyclerView = findViewById(R.id.recyclerViewMemory);\r\n        RecyclerView.LayoutManager layoutManager = new GridLayoutManager(this, 1);\r\n        recyclerView.setLayoutManager(layoutManager);\r\n        memoryAdaptor = new MemoryTypeAdaptor(DataUtil.MemoryPairs, listener_addSecondCard);\r\n        recyclerView.setAdapter(memoryAdaptor);\r\n\r\n        //init buttons\r\n        btn_logBook = findViewById(R.id.btn_logBook);\r\n        btn_logBook.setOnClickListener(listener_sendToLogBook);\r\n\r\n        btn_removeAll = findViewById(R.id.btn_removeAll);\r\n        btn_removeAll.setOnClickListener(listener_removeAll);\r\n\r\n        btn_removeAllConnections = findViewById(R.id.btn_clearAllConnections);\r\n        btn_removeAllConnections.setOnClickListener(listener_removeAllConnections);\r\n\r\n        btn_addCard = findViewById(R.id.btn_addCard);\r\n        btn_addCard.setOnClickListener(listener_addCard);\r\n\r\n    }\r\n\r\n    /**\r\n     * Initialize all listeners for clickable things\r\n     */\r\n    private void initListeners() {\r\n\r\n        //The listener for the logbook button\r\n        listener_sendToLogBook = ((View view) -> {\r\n            createConfirmationDialog(R.string.confirmation_title, R.string.confirmation_save, R.string.cancel, (dialog, id) -> {\r\n                startActivity(LogAppUtil.createIntent(DataUtil.MemoryPairs));\r\n            }, (dialog, id) -> {\r\n            });\r\n        });\r\n\r\n        //The listener for deleting all cards\r\n        listener_removeAll = ((View view) -> {\r\n            createConfirmationDialog(R.string.clearall_title, R.string.clearall_save, R.string.cancel, (dialog, id) -> {\r\n\r\n                DataUtil.MemoryPairs.clear();\r\n\r\n                loadRecycleView();\r\n\r\n            }, (dialog, id) -> {\r\n            });\r\n        });\r\n\r\n        //The listener for removing all connections\r\n        listener_removeAllConnections = ((View view) -> createConfirmationDialog(R.string.clearconstraint_title,\r\n                R.string.clearconstraints_save, R.string.cancel, (dialog, id) -> {\r\n\r\n                    ArrayList<MemoryPair> currentMemoryPairs = new ArrayList<MemoryPair>(DataUtil.MemoryPairs);\r\n\r\n                    DataUtil.MemoryPairs.clear();\r\n\r\n                    currentMemoryPairs.forEach(pair -> {\r\n                        if (pair.cardTwo != null) {\r\n                            DataUtil.MemoryPairs.add(new MemoryPair(pair.cardOne));\r\n                            DataUtil.MemoryPairs.add(new MemoryPair(pair.cardTwo));\r\n                        } else {\r\n                            DataUtil.MemoryPairs.add(new MemoryPair(pair.cardOne));\r\n                        }\r\n                    });\r\n                    loadRecycleView();\r\n                }, (dialog, id) -> {\r\n                }));\r\n\r\n        //the listener for adding new cards\r\n        listener_addCard = (new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                launchQr(false);\r\n            }\r\n        });\r\n\r\n\r\n        //the listener for adding a second card\r\n        listener_addSecondCard = new ClickListener() {\r\n            @Override\r\n            public void onAddSecondClicked(int position) {\r\n                currentPosition = position;\r\n                launchQr(true);\r\n            }\r\n\r\n            @Override\r\n            public void onDeleteClick(int position) {\r\n                currentPosition = position;\r\n                DataUtil.MemoryPairs.remove(position);\r\n\r\n                loadRecycleView();\r\n            }\r\n\r\n            @Override\r\n            public void onSplitClick(int position) {\r\n\r\n                MemoryPair mPair = DataUtil.MemoryPairs.get(position);\r\n\r\n                MemoryCard mCardOne = mPair.cardOne;\r\n                MemoryCard mCardTwo = mPair.cardTwo;\r\n\r\n                if (mCardOne != null && mCardTwo != null) {\r\n\r\n                    DataUtil.MemoryPairs.remove(position);\r\n\r\n                    DataUtil.MemoryPairs.add(new MemoryPair(mCardOne));\r\n                    DataUtil.MemoryPairs.add(new MemoryPair(mCardTwo));\r\n\r\n                } else {\r\n                    Toast.makeText(MainActivity.this, \"Cant split a single card!\", Toast.LENGTH_LONG).show();\r\n                }\r\n\r\n                loadRecycleView();\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * We need this function becuase .notifyDataSetChanged doesnt work properly\r\n     */\r\n    public void loadRecycleView(){\r\n        memoryAdaptor = new MemoryTypeAdaptor(DataUtil.MemoryPairs, listener_addSecondCard);\r\n        recyclerView.setAdapter(memoryAdaptor);\r\n    }\r\n\r\n    /**\r\n     * Helper for creating a confirmation dialog\r\n     *\r\n     * @param text\r\n     * @param textPositive\r\n     * @param textNegative\r\n     * @param listenerPositive\r\n     * @param listenerNegative\r\n     */\r\n    private void createConfirmationDialog(int text, int textPositive, int textNegative,\r\n                                          DialogInterface.OnClickListener listenerPositive,\r\n                                          DialogInterface.OnClickListener listenerNegative) {\r\n        new AlertDialog.Builder(MainActivity.this)\r\n                .setMessage(text)\r\n                .setPositiveButton(textPositive, listenerPositive)\r\n                .setNegativeButton(textNegative, listenerNegative)\r\n                .create()\r\n                .show();\r\n    }\r\n\r\n\r\n    boolean isSecond = false;\r\n    public static int currentPosition;\r\n\r\n    /**\r\n     * This is the activity for the qr libary\r\n     */\r\n    private final ActivityResultLauncher<ScanOptions> barcodeLauncher = registerForActivityResult(new ScanContract(),\r\n            result -> {\r\n                if (result.getContents() == null) {\r\n                    Toast.makeText(MainActivity.this, \"Cancelled\", Toast.LENGTH_LONG).show();\r\n                } else {\r\n\r\n                    String qrContent = result.getContents();\r\n                    String imagePath = result.getBarcodeImagePath();\r\n\r\n\r\n                    MemoryCard mCard = new MemoryCard(qrContent, imagePath);\r\n                    if (isSecond) {\r\n                        DataUtil.MemoryPairs.get(currentPosition).cardTwo = mCard;\r\n                    } else {\r\n                        DataUtil.MemoryPairs.add(new MemoryPair(mCard));\r\n                    }\r\n\r\n                    loadRecycleView();\r\n\r\n                    Toast.makeText(MainActivity.this, \"Qr Code sucessfully scanned!\", Toast.LENGTH_LONG).show();\r\n                }\r\n            });\r\n\r\n    /**\r\n     * Launch the qr code activity\r\n     *\r\n     * @param isSecond if the qr scanner should scan the code for the second card\r\n     */\r\n    public void launchQr(boolean isSecond) {\r\n        ScanOptions options = new ScanOptions();\r\n        options.setDesiredBarcodeFormats(ScanOptions.QR_CODE);\r\n        options.setPrompt(\"Scan a barcode\");\r\n        options.setCaptureActivity(MyCaptureActivity.class);\r\n        options.setCameraId(0);  // Use a specific camera of the device\r\n        options.setBeepEnabled(false);\r\n        options.setBarcodeImageEnabled(true);\r\n        options.addExtra(Intents.Scan.BARCODE_IMAGE_ENABLED, true);\r\n        options.setOrientationLocked(false);\r\n\r\n        this.isSecond = isSecond;\r\n\r\n        barcodeLauncher.launch(options);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n        savePairs();\r\n    }\r\n\r\n    private String DataFilename = \"cards.txt\";\r\n\r\n    /**\r\n     * Method for saving all pairs that exist\r\n     */\r\n    private void savePairs() {\r\n        FileOutputStream fos;\r\n\r\n        try {\r\n            fos = getApplicationContext().openFileOutput(DataFilename, Context.MODE_PRIVATE);\r\n            getApplicationContext().fileList();\r\n            DataUtil.writePairsFile(fos);\r\n\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method for loading all pairs on app startup\r\n     */\r\n    private void loadPairs() {\r\n        FileInputStream fis;\r\n\r\n        try {\r\n            fis = getApplicationContext().openFileInput(DataFilename);\r\n            String[] files = getApplicationContext().fileList();\r\n            DataUtil.loadPairsFile(fis);\r\n\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/ch/bfh/memory/activities/MainActivity.java b/app/src/main/java/ch/bfh/memory/activities/MainActivity.java
--- a/app/src/main/java/ch/bfh/memory/activities/MainActivity.java	(revision 9d72830346e5e37788268ab085c9d8e174dfb82f)
+++ b/app/src/main/java/ch/bfh/memory/activities/MainActivity.java	(date 1664554452057)
@@ -1,20 +1,18 @@
 package ch.bfh.memory.activities;
 
 import android.app.AlertDialog;
+import android.content.Context;
 import android.content.DialogInterface;
 import android.os.Bundle;
-import android.provider.ContactsContract;
 import android.view.View;
 import android.widget.Button;
+import android.widget.Toast;
 
 import androidx.activity.result.ActivityResultLauncher;
 import androidx.appcompat.app.AppCompatActivity;
 import androidx.recyclerview.widget.GridLayoutManager;
 import androidx.recyclerview.widget.RecyclerView;
 
-import android.content.Context;
-import android.widget.Toast;
-
 import com.google.zxing.client.android.Intents;
 import com.journeyapps.barcodescanner.ScanContract;
 import com.journeyapps.barcodescanner.ScanOptions;
@@ -23,10 +21,8 @@
 import java.io.FileNotFoundException;
 import java.io.FileOutputStream;
 import java.util.ArrayList;
-import java.util.List;
 
 import ch.bfh.memory.R;
-
 import ch.bfh.memory.interfaces.ClickListener;
 import ch.bfh.memory.models.MemoryCard;
 import ch.bfh.memory.models.MemoryPair;
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_28_09_2022_13_27__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_28_09_2022_13_27__Changes_.xml
new file mode 100644
